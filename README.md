# vue 实现多标签页

[Live Demo](https://codesandbox.io/s/vue-multitab-demo-pgbii?file=/package.json)

## Features

- `vue@2.x` + `composition-api`
- 使用内置 `keep-alive` 组件控制路由页面的生命周期
- 通过预处理， 将路由页面用 HOC 包裹，实现页面与标签页相关的控制逻辑结偶 
- 支持嵌套路由

## TODO

- [ ] 同一个路由页面可打开多次

## Problems

### 脏数据

多标签 `keep-alive` 的场景，会产生脏数据的问题。

比如:

1. 打开一个包含 `地区选择组件` 的表单页
2. 再打开地区管理页，对其中的地区数据做更新
3. 此时回到表单页，`地区选择组件` 数据还是修改前的状态，成为脏数据。

可能的方案:

1. 基于响应式的数据服务层，如 vuex 或者自己实现的数据服务。
2. 实现标签页间通讯。比如，修改地区数据后，将事件广播到整个应用，由标签页或者业务组件自行处理

> 注意：不管是数据还是页面级别的控制，都会产生很严重模块间的耦合，暂时没有很好的方案

